const images=["https://images.unsplash.com/photo-1577593980495-6e7f66a54ee6?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80","https://images.unsplash.com/photo-1430285561322-7808604715df?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80","https://images.unsplash.com/photo-1597047084897-51e81819a499?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1049&q=80","https://images.unsplash.com/photo-1580587771525-78b9dba3b914?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=967&q=80","https://images.unsplash.com/photo-1518780664697-55e3ad937233?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=401&q=80","https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80"],searchInput=document.querySelector("#search"),appBlock=document.querySelector("#app"),preloader=document.querySelector("#preloader"),app={init:()=>{this.showAllPosts(this.getPosts()),searchInput.addEventListener("input",this.search)},postItems:[],getPosts:this.getPosts=async()=>{let e;this.preloader("on");let t=await fetch("https://603e38c548171b0017b2ecf7.mockapi.io/homes");if(!t.ok)throw new Error("Ошибка HTTP: "+t.status);return e=t.json(),this.preloader("off"),e},showAllPosts:this.showAllPosts=async function(e){e.then(e=>{this.postItems=e;for(let t of e)this.appendEl(t)})},appendEl:this.appendEl=e=>{appBlock.insertAdjacentHTML("beforeend",`\n                <a href="https://603e38c548171b0017b2ecf7.mockapi.io/homes/${e.id}" class="developments__item">\n                  <div class="developments__img">\n                    <img src="${images[Math.floor(Math.random()*images.length)]}" alt="">\n                    <div class="developments__type ${"IndependentLiving"==e.type?"developments__type_independent":"developments__type_rest"}">${e.type}</div>\n                  </div>\n                  <div class="developments__content">\n                    <h4 class="developments__title">${e.title}</h4>\n                    <p class="developments__address">${e.address}</p>\n                    <p class="developments__price">New Properties for Sale from <b>£${e.price}</b></p>\n                    <p class="developments__sub">Shared Ownership Available</p>\n                  </div>\n                </a>\n          `)},search:this.search=()=>{let e=searchInput.value.toLowerCase(),t=this.postItems.filter(t=>!t.title.toLowerCase().indexOf(e));appBlock.innerHTML="";for(let e of t)this.appendEl(e)},preloader:this.preloader=e=>{"on"===e?preloader.innerHTML='<div id="loader"></div>':"off"===e&&(preloader.innerHTML="",preloader.style.display="none")}};app.init();